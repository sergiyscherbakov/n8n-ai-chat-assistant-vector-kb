{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        736,
        -2176
      ],
      "id": "f8ccfb02-e5f5-42ec-b17d-4993f9a9356e",
      "name": "When chat message received",
      "webhookId": "873e75cc-bcf9-4d4f-8fbf-1eb415d8a5f8"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Ти комедійний асистент, який дружньо і пощитивно відповідає на запити користувача\n\nЗАВЖДИ ШУКАЙ інформацію із векторної бази і використовуй інструмент \"test_SVDB\" для пошуку інформації для КОЖНОГО ЗАПИТУ КОРИСТУВАЧА\n\nВідповідь надай УКРАЇНІСЬКОЮ мовою"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        960,
        -2176
      ],
      "id": "3aea32f4-bf84-413f-8dba-a1d1a6bc6f25",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5-nano",
          "mode": "list",
          "cachedResultName": "gpt-5-nano"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        880,
        -1968
      ],
      "id": "59c66e4e-6742-4267-a883-90d93f93d79d",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "r1mXL5JVPJilJ6rh",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1008,
        -1968
      ],
      "id": "18dcd902-abe4-46cb-8b2a-557f9fa4a1ca",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "ПОШУК ІНФОРМАЦІЇ в векторній базі знань",
        "memoryKey": {
          "__rl": true,
          "value": "vector_store_key",
          "mode": "list",
          "cachedResultName": "vector_store_key"
        },
        "topK": 5
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        1216,
        -2000
      ],
      "id": "7fe37963-c5e6-46c2-8f8f-3ddc2a91971f",
      "name": "test_SVDB"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1200,
        -1856
      ],
      "id": "1893cbde-febf-4e3b-a9e4-3a5df7df2794",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "r1mXL5JVPJilJ6rh",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "memoryKey": {
          "__rl": true,
          "value": "vector_store_key",
          "mode": "list",
          "cachedResultName": "vector_store_key"
        },
        "embeddingBatchSize": 800
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        0,
        -1984
      ],
      "id": "3b791463-3664-4330-bb9d-81ca502cdbc5",
      "name": "Simple Vector Store"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -128,
        -1792
      ],
      "id": "4adb4a7e-d560-4530-8962-bf829793917b",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "r1mXL5JVPJilJ6rh",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "textSplittingMode": "custom",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        96,
        -1776
      ],
      "id": "963052b2-ba30-40b7-841d-76cfdfabb9d3",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "chunkSize": 800,
        "chunkOverlap": 400,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        64,
        -1632
      ],
      "id": "94c716b8-a759-4a6e-9c74-8a4681a9d7ba",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "url": "https://ai-2027.com/ai-2027.pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -576,
        -2176
      ],
      "id": "9ca334eb-5133-463d-afc5-a5b960e35bdc",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "url": "https://naurok.com.ua/uploads/files/404207/106789/113635_html/images/106789.002.png",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -576,
        -1984
      ],
      "id": "2b18274f-753e-4244-87a6-19d7c6f84d9c",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "text": "Опиши деталізовано зображення і перепиши весь текст який знаходиться на цьому зображенні.\n\nВідповідь надай у вигляді наступної структури\n\nОПИС ЗОБРАЖЕННЯ\n\nТЕКСТ ІЗ ЗОБРАЖЕННЯ",
        "inputType": "base64",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -368,
        -1984
      ],
      "id": "e18f6eee-7760-4156-8bf4-c72a111e7b2e",
      "name": "Analyze image",
      "credentials": {
        "openAiApi": {
          "id": "r1mXL5JVPJilJ6rh",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -368,
        -2176
      ],
      "id": "73268af1-3151-4fe9-bc77-8aeac4822fa5",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "mode": "chooseBranch"
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -160,
        -1984
      ],
      "id": "4cff5863-de01-4689-bd1c-5fbdc92d64c7",
      "name": "Merge"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "test_SVDB": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "test_SVDB",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Analyze image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Simple Vector Store": {
      "main": [
        []
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Simple Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e54b1b60-07e3-4ece-a050-a3e2dec56617",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e4ad9d50485b4ab8320a3223b6b7282f65fdd7b9f19f2d3a6f57b260394a6c03"
  },
  "id": "Y7SFE4ybtm6kVIuW",
  "tags": []
}